# 快速开始

## 5 分钟上手指南

### 1️⃣ 安装依赖

```bash
cd ginv2
go mod tidy
```

### 2️⃣ 运行程序

```bash
go run .
```

或编译后运行：

```bash
go build -o loadtest.exe
./loadtest.exe
```

### 3️⃣ 打开浏览器

访问: http://localhost:8080

### 4️⃣ 开始测试

#### 方式一：手动填写表单

1. 填写测试配置：
   - 总请求次数: `100`
   - 并发数: `10`
   - 请求方式: `GET`
   - 请求地址: `https://httpbin.org/get`

2. 选择执行方式：
   - **立即执行**: 点击"开始测试"立即运行
   - **定时任务**: 输入 Cron 表达式（如 `*/5 * * * *`）

3. 查看实时日志和测试结果

#### 方式二：导入 cURL 命令

1. 从浏览器开发者工具或 Postman 复制 cURL 命令
2. 粘贴到"导入 cURL 命令"文本框
3. 点击"解析并导入"
4. 表单自动填充完成

**示例 cURL:**
```bash
curl 'https://api.example.com/users' \
  -H 'Authorization: Bearer token123' \
  -H 'Content-Type: application/json' \
  --data-raw '{"name":"test","age":25}'
```

### 5️⃣ 管理定时任务

在页面底部的"定时任务管理"区域：
- 📋 查看所有定时任务
- 🔄 刷新任务列表
- 🗑️ 取消不需要的任务

## 常用场景

### 场景 1: API 性能测试

测试 API 接口的性能和稳定性：

```
总请求次数: 1000
并发数: 50
请求方式: POST
请求地址: https://your-api.com/endpoint
Headers: {"Authorization": "Bearer your-token"}
Body: {"test": "data"}
执行方式: 立即执行
```

### 场景 2: 定时健康检查

每 5 分钟检查服务是否正常：

```
总请求次数: 1
并发数: 1
请求方式: GET
请求地址: https://your-service.com/health
执行方式: 定时任务
Cron 表达式: */5 * * * *
```

### 场景 3: 压力测试

模拟高并发场景：

```
总请求次数: 10000
并发数: 100
请求方式: POST
请求地址: https://your-api.com/endpoint
执行方式: 立即执行
```

## Cron 表达式速查

| 表达式 | 说明 |
|--------|------|
| `* * * * *` | 每分钟 |
| `*/5 * * * *` | 每 5 分钟 |
| `0 * * * *` | 每小时 |
| `0 0 * * *` | 每天 0 点 |
| `0 12 * * *` | 每天中午 12 点 |
| `0 0 * * 0` | 每周日 0 点 |
| `0 0 1 * *` | 每月 1 号 0 点 |

## 数据文件

程序运行后会在当前目录生成：

```
loadtest.db          # SQLite 数据库文件（保存所有定时任务）
```

**重要**: 
- 备份 `loadtest.db` 即可保存所有任务数据
- 服务器重启后会自动恢复所有定时任务

## 查看测试结果

测试完成后，日志会显示详细统计：

```
============================================================
📊 测试结果:
   总请求数: 100
   成功: 100 (100.00%)
   失败: 0 (0.00%)
   总耗时: 139.068ms
   平均响应时间: 13.659646ms
   最小响应时间: 4.8831ms
   最大响应时间: 45.8429ms
   每秒请求数: 719.07
============================================================
```

## 常见问题


### Q: 如何备份任务数据？

A: 只需复制 `loadtest.db` 文件：
```bash
cp loadtest.db backup/loadtest_backup.db
```

### Q: 如何查看数据库内容？

A: 使用 SQLite 客户端：
```bash
sqlite3 loadtest.db
SELECT * FROM scheduled_tasks;
```

### Q: 定时任务不执行？

A: 检查：
1. Cron 表达式是否正确
2. 任务是否在任务列表中
3. 查看日志是否有错误信息

### Q: 如何停止所有定时任务？

A: 在"定时任务管理"区域逐个取消，或直接删除 `loadtest.db` 文件。


